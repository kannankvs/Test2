<!DOCTYPE html>
<html>
  
<head>
    <title>
        jQuery getJSON() Method
    </title>
      
	$(document).ready(function () {
	    $.getJSON("sonic_image_links.json", 
		function(data) {
		    dbs = data;
		    branches = Object.keys(data);
		    image_data = [];
			d2 = "abcd2";
			$("#abcd_id").append(d2);
		    for (let i = branches.length - 1 ; i >= 0; i--) {
			display_data = "<td style=\" text-align: center; padding-left: 0.5em; background-color: lightgrey; height: 45px; align: center;\"><span style=\"letter-spacing: 0.15em;  font-weight: bold; font-size: calc(11px + 0.6vw); \">" + branches[i].toUpperCase() +"</span></td>";
			$("#branch").append(display_data);
			images = Object.keys(data[branches[i]]);
			for (let j = 0; j < images.length; j++) {
			    image_name = images[j];
			    image = data[branches[i]][images[j]];
			    image_platform = image_name.split(".")[0];
			    if(image_platform.length == 1){
				platform = ""
			    }else{
				platform = image_platform.split("sonic-")[1];
				if(platform.length == 1){
				    platform = ""
				}
			    }
			    image_avail = true;
			    image_url = image['url'];
			    if(image_url === 'null' || image_url === ""){
				image_avail = false;
			    }
			    if ( !$("#"+platform).length ){
				platform_column = "<tr id=\""+ platform +"\"><td style=\" text-align: center; \"><strong>"+ platform.toUpperCase()+"</strong></td></tr>";
				$("#disp_table").append(platform_column);
			    }
			    if (image_avail)
				image_column ="<td style=\"text-align: center;\"><span style=\"color: #0000ff;\"><a href=\""+ image_url +"\">"+image_name+"</a></span></td>";
			    else
				image_column ="<td style=\"text-align: center;\"><span style=\"color: #0000ff;\">N/A</span></td>";

			    $("#"+platform).append(image_column);
			}
		    }

		});
	});
    </script>

   </head>
       
   <body>
      <p id="abcd_id>
          Click3 on the button to fetch employee data
      </p>
           
      <div id = "display" style = "background-color:#39B54A;"></div>
           
              
   </body>
</html>